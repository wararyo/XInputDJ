# XInputDJ

このソフトウェアを使用すると、XboxコントローラーなどXInput対応のコントローラーを使用してDJソフトウェアであるMixxxを操作することができるようになる予定です。  
Steam DeckやROG AllyなどのゲーミングポータブルPCでの使用を想定しています。  
ただし、現時点ではWindowsのみ対応とする予定です。  

## Getting started

1. [Release](https://github.com/wararyo/XInputDJ/releases)からビルド済みファイルをダウンロードします。
2. `binds/Mixxx/controllers` フォルダの中身を `%localappdata%/Mixxx/Controllers` にコピーします。
3. loopMIDI、LoopBe1などの仮想MIDIデバイスを導入します。(以下、loopMIDIと導入したものとして記述します)
4. loopMIDIを起動し、そのあとにXInputDJを起動します。
5. XInputDJの画面上でloopMIDIの仮想MIDIデバイスを選択した後、 `Start` を押下します。
6. Mixxxを起動します。
7. 設定->コントローラー->(仮想MIDIデバイス名) を選択します。
8. Load Mapping: と書かれたプルダウンから `XInputDJ` を選択します。
9. OKを押して完了です。

## Mapping

レイヤーA
```
左スティック: デッキ1のノブを回す
十字キー下: 左スティックの機能をイコライザーLoに設定
十字キー左: 左スティックの機能をフィルターに設定
十字キー上: 左スティックの機能をイコライザーHiに設定
十字キー右: 左スティックの機能をトリムに設定
L: 左スティックの機能をチャンネルフェーダーに設定
LT: 左スティックの機能をテンポに設定
L3: 左スティックの機能をジョグに設定

右スティック: デッキ2のノブを回す
A: 右スティックの機能をイコライザーLoに設定
B: 右スティックの機能をフィルターに設定
Y: 右スティックの機能をイコライザーHiに設定
X: 右スティックの機能をトリムに設定
R: 右スティックの機能をチャンネルフェーダーに設定
RT: 右スティックの機能をテンポに設定
R3: 右スティックの機能をジョグに設定

セレクト短押し: デッキ1のCUE切り替え
スタート短押し: デッキ2のCUE切り替え
セレクト長押し: 押している間だけレイヤーBに切り替え
スタート長押し: 押している間だけレイヤーBに切り替え
```

レイヤーB
```
左スティック: ライブラリ上下
十字キー下: デッキ1 PLAY
十字キー左: デッキ1 CUE
十字キー上: デッキ1 PFL
十字キー右: デッキ1 SYNC
L: デッキ1 ループ有効/無効
LT: デッキ1 HOT CUE 2
L3: ライブラリフォーカス移動

右スティック: ライブラリ上下
A: デッキ2 PLAY
B: デッキ2 CUE
Y: デッキ2 PFL
X: デッキ2 SYNC
R: デッキ2 ループ有効/無効
RT: デッキ2 HOT CUE 2
R3: ライブラリフォーカス移動

セレクト短押し: デッキ1に曲をロード
スタート短押し: デッキ2に曲をロード
```

## Develop

```
npm install
npm run tauri dev
```

loopMIDIなどの仮想MIDIデバイスを使用してください。

## Q&A

Q. 私の使ってるDJソフトで使えますか？

A. キーバインドを手動で設定する必要がありますが、MIDIアサイン機能を持つDJソフトウェアであればおそらく使えます。  
rekordbox、Serato DJ Pro、Virtual DJ、TraktorにはMIDIアサイン機能があります。  
プルリクエスト歓迎です。

Q. 私の使ってるゲームパッドで使えますか？

A. XInput対応ゲームパッドであれば使えます。  
Xbox コントローラーはXInputに対応しています。  
Switch Proコントローラーは残念ながらXInputに対応していませんが、別途変換のためのソフトウェアを用いることでおそらく使用可能です。

Q. Windows以外で使えますか？

A. すみません、現在はWindowsのみの対応となっています。  
プルリクエスト歓迎です。
